{% extends "base.html" %}
{% block title %}Project: {{ project.name }}{% endblock %}

{% block content %}

<h3 align="center">Project Manager</h3>
<div class="container">
    <h1 align="center" id="project-name">{{ project.name }}</h1>
    <div class="progress">
        <div class="progress-bar" role="progressbar" style="width: {{ progress_percentage }}%;" aria-valuenow="{{ progress_percentage }}" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
    <p align="center" id="project-description">{{ project.description }}</p>

    <form method="POST">
      <label>Invite User</label>
      <input
            type="email"
            id="new_user_email"
            name="new_user_email"
            placeholder="Enter email"
          style="width: 250px;"><button type="submit">Send</button>
    </form>

    <div align="center">
        <!-- Button to navigate to the New Task page -->
        <a class="nav-item nav-link" href="{{ url_for('auth.new_task', project_id=project.id) }}">
            <button class="btn btn-primary">New Task</button>
        </a>
        <button type="button" class="btn btn-primary">Edit Project</button>
        <button type="button" class="btn btn-danger">Delete Project</button>
    </div>
    
    <div class="tasks-container">
      {% for task in project.tasks %}
          <div class="task-box">
              <h4>{{ task.name }}</h4>
              <span class="task-dates">{{ task.start_date.strftime('%Y-%m-%d') }} &mdash;
                {% if task.deadline.strftime('%Y-%m-%d') == '9999-12-31' %}
                No Deadline
                {% else %}
                {{ task.deadline.strftime('%Y-%m-%d') }}
                {% endif %}
              </span>
              <span class="task-assignee">({{ task.assignee }})</span>
              <p class="task-description">{{ task.description or "No description available" }}</p>
              <div class="task-actions">
                  <button type="button" class="btn btn-success btn-xsm">Complete Task</button>
                  <button type="button" class="btn btn-primary btn-xsm">Edit Task</button>
                  <button type="button" class="btn btn-danger btn-xsm">Delete Task</button>
              </div>
          </div>
      {% endfor %}
  </div>

</div>

{% endblock %}

